document.getElementById('solve-button').addEventListener('click', async () => {
    console.log("Button clicked");
    const fileInput = document.getElementById('file-input');
    const file = fileInput.files[0];

    if (file) {
        console.log("File uploaded:", file.name);
        const img = new Image();
        img.src = URL.createObjectURL(file);
        
        img.onload = async () => {
            console.log("Image loaded");
            try {
                const result = await Tesseract.recognize(img, 'eng');
                const extractedText = result.data.text;
                console.log("Extracted Text:", extractedText);
                document.getElementById('result').innerText = `Extracted Text: \n${extractedText}`;

                const solutions = solveProblems(extractedText);
                document.getElementById('result').innerText += `\n\nSolutions: \n${solutions.join('\n')}`;
            } catch (error) {
                console.error("Error during OCR:", error);
                document.getElementById('result').innerText = "OCR processing failed.";
            }
        };

        img.onerror = () => {
            console.error("Error loading image");
            document.getElementById('result').innerText = "Error loading image.";
        };
    } else {
        console.log("No file selected");
        document.getElementById('result').innerText = "Please upload an image.";
    }
});
